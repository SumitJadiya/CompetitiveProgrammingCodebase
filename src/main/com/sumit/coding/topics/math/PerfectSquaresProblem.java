package main.com.sumit.coding.topics.math;

public class PerfectSquaresProblem {

    public static void main(String[] args) {
        System.out.println(new PerfectSquaresProblem().numSquares(1) + " " + 1);
        System.out.println(new PerfectSquaresProblem().numSquares(2) + " " + 2);
        System.out.println(new PerfectSquaresProblem().numSquares(3) + " " + 3);
        System.out.println(new PerfectSquaresProblem().numSquares(4) + " " + 4);
        System.out.println(new PerfectSquaresProblem().numSquares(5) + " " + 5);
        System.out.println(new PerfectSquaresProblem().numSquares(6) + " " + 6);
        System.out.println(new PerfectSquaresProblem().numSquares(7) + " " + 7);
        System.out.println(new PerfectSquaresProblem().numSquares(8) + " " + 8);
        System.out.println(new PerfectSquaresProblem().numSquares(9) + " " + 9);
        System.out.println(new PerfectSquaresProblem().numSquares(10) + " " + 10);
        System.out.println(new PerfectSquaresProblem().numSquares(11) + " " + 11);
        System.out.println(new PerfectSquaresProblem().numSquares(12) + " " + 12);
        System.out.println(new PerfectSquaresProblem().numSquares(13) + " " + 13);
        System.out.println(new PerfectSquaresProblem().numSquares(14) + " " + 14);
        System.out.println(new PerfectSquaresProblem().numSquares(15) + " " + 15);
        System.out.println(new PerfectSquaresProblem().numSquares(16) + " " + 16);
        System.out.println(new PerfectSquaresProblem().numSquares(17) + " " + 17);
        System.out.println(new PerfectSquaresProblem().numSquares(18) + " " + 18);
        System.out.println(new PerfectSquaresProblem().numSquares(19) + " " + 19);
        System.out.println(new PerfectSquaresProblem().numSquares(20) + " " + 20);
        System.out.println(new PerfectSquaresProblem().numSquares(21) + " " + 21);
        System.out.println(new PerfectSquaresProblem().numSquares(22) + " " + 22);
        System.out.println(new PerfectSquaresProblem().numSquares(23) + " " + 23);
        System.out.println(new PerfectSquaresProblem().numSquares(24) + " " + 24);
        System.out.println(new PerfectSquaresProblem().numSquares(25) + " " + 25);
        System.out.println(new PerfectSquaresProblem().numSquares(26) + " " + 26);
        System.out.println(new PerfectSquaresProblem().numSquares(27) + " " + 27);
        System.out.println(new PerfectSquaresProblem().numSquares(28) + " " + 28);
        System.out.println(new PerfectSquaresProblem().numSquares(29) + " " + 29);
        System.out.println(new PerfectSquaresProblem().numSquares(30) + " " + 30);
        System.out.println(new PerfectSquaresProblem().numSquares(31) + " " + 31);
        System.out.println(new PerfectSquaresProblem().numSquares(32) + " " + 32);
        System.out.println(new PerfectSquaresProblem().numSquares(33) + " " + 33);
        System.out.println(new PerfectSquaresProblem().numSquares(34) + " " + 34);
        System.out.println(new PerfectSquaresProblem().numSquares(35) + " " + 35);
        System.out.println(new PerfectSquaresProblem().numSquares(36) + " " + 36);
        System.out.println(new PerfectSquaresProblem().numSquares(37) + " " + 37);
        System.out.println(new PerfectSquaresProblem().numSquares(38) + " " + 38);
        System.out.println(new PerfectSquaresProblem().numSquares(39) + " " + 39);
        System.out.println(new PerfectSquaresProblem().numSquares(40) + " " + 40);
        System.out.println(new PerfectSquaresProblem().numSquares(41) + " " + 41);
        System.out.println(new PerfectSquaresProblem().numSquares(42) + " " + 42);
        System.out.println(new PerfectSquaresProblem().numSquares(43) + " " + 43);
        System.out.println(new PerfectSquaresProblem().numSquares(44) + " " + 44);
        System.out.println(new PerfectSquaresProblem().numSquares(45) + " " + 45);
        System.out.println(new PerfectSquaresProblem().numSquares(46) + " " + 46);
        System.out.println(new PerfectSquaresProblem().numSquares(47) + " " + 47);
        System.out.println(new PerfectSquaresProblem().numSquares(48) + " " + 48);
        System.out.println(new PerfectSquaresProblem().numSquares(49) + " " + 49);
        System.out.println(new PerfectSquaresProblem().numSquares(50) + " " + 50);
        System.out.println(new PerfectSquaresProblem().numSquares(51) + " " + 51);
        System.out.println(new PerfectSquaresProblem().numSquares(52) + " " + 52);
        System.out.println(new PerfectSquaresProblem().numSquares(53) + " " + 53);
        System.out.println(new PerfectSquaresProblem().numSquares(54) + " " + 54);
        System.out.println(new PerfectSquaresProblem().numSquares(55) + " " + 55);
        System.out.println(new PerfectSquaresProblem().numSquares(56) + " " + 56);
        System.out.println(new PerfectSquaresProblem().numSquares(57) + " " + 57);
        System.out.println(new PerfectSquaresProblem().numSquares(58) + " " + 58);
        System.out.println(new PerfectSquaresProblem().numSquares(59) + " " + 59);
        System.out.println(new PerfectSquaresProblem().numSquares(60) + " " + 60);
        System.out.println(new PerfectSquaresProblem().numSquares(61) + " " + 61);
        System.out.println(new PerfectSquaresProblem().numSquares(62) + " " + 62);
        System.out.println(new PerfectSquaresProblem().numSquares(63) + " " + 63);
        System.out.println(new PerfectSquaresProblem().numSquares(64) + " " + 64);
        System.out.println(new PerfectSquaresProblem().numSquares(65) + " " + 65);
        System.out.println(new PerfectSquaresProblem().numSquares(66) + " " + 66);
        System.out.println(new PerfectSquaresProblem().numSquares(67) + " " + 67);
        System.out.println(new PerfectSquaresProblem().numSquares(68) + " " + 68);
        System.out.println(new PerfectSquaresProblem().numSquares(69) + " " + 69);
        System.out.println(new PerfectSquaresProblem().numSquares(70) + " " + 70);
        System.out.println(new PerfectSquaresProblem().numSquares(71) + " " + 71);
        System.out.println(new PerfectSquaresProblem().numSquares(72) + " " + 72);
        System.out.println(new PerfectSquaresProblem().numSquares(73) + " " + 73);
        System.out.println(new PerfectSquaresProblem().numSquares(74) + " " + 74);
        System.out.println(new PerfectSquaresProblem().numSquares(75) + " " + 75);
        System.out.println(new PerfectSquaresProblem().numSquares(76) + " " + 76);
        System.out.println(new PerfectSquaresProblem().numSquares(77) + " " + 77);
        System.out.println(new PerfectSquaresProblem().numSquares(78) + " " + 78);
        System.out.println(new PerfectSquaresProblem().numSquares(79) + " " + 79);
        System.out.println(new PerfectSquaresProblem().numSquares(80) + " " + 80);
        System.out.println(new PerfectSquaresProblem().numSquares(81) + " " + 81);
        System.out.println(new PerfectSquaresProblem().numSquares(82) + " " + 82);
        System.out.println(new PerfectSquaresProblem().numSquares(83) + " " + 83);
        System.out.println(new PerfectSquaresProblem().numSquares(84) + " " + 84);
        System.out.println(new PerfectSquaresProblem().numSquares(85) + " " + 85);
        System.out.println(new PerfectSquaresProblem().numSquares(86) + " " + 86);
        System.out.println(new PerfectSquaresProblem().numSquares(87) + " " + 87);
        System.out.println(new PerfectSquaresProblem().numSquares(88) + " " + 88);
        System.out.println(new PerfectSquaresProblem().numSquares(89) + " " + 89);
        System.out.println(new PerfectSquaresProblem().numSquares(90) + " " + 90);
        System.out.println(new PerfectSquaresProblem().numSquares(91) + " " + 91);
        System.out.println(new PerfectSquaresProblem().numSquares(92) + " " + 92);
        System.out.println(new PerfectSquaresProblem().numSquares(93) + " " + 93);
        System.out.println(new PerfectSquaresProblem().numSquares(94) + " " + 94);
        System.out.println(new PerfectSquaresProblem().numSquares(95) + " " + 95);
        System.out.println(new PerfectSquaresProblem().numSquares(96) + " " + 96);
        System.out.println(new PerfectSquaresProblem().numSquares(97) + " " + 97);
        System.out.println(new PerfectSquaresProblem().numSquares(98) + " " + 98);
        System.out.println(new PerfectSquaresProblem().numSquares(99) + " " + 99);
        System.out.println(new PerfectSquaresProblem().numSquares(100) + " " + 100);
        System.out.println(new PerfectSquaresProblem().numSquares(101) + " " + 101);
        System.out.println(new PerfectSquaresProblem().numSquares(102) + " " + 102);
        System.out.println(new PerfectSquaresProblem().numSquares(103) + " " + 103);
        System.out.println(new PerfectSquaresProblem().numSquares(104) + " " + 104);
        System.out.println(new PerfectSquaresProblem().numSquares(105) + " " + 105);
        System.out.println(new PerfectSquaresProblem().numSquares(106) + " " + 106);
        System.out.println(new PerfectSquaresProblem().numSquares(107) + " " + 107);
        System.out.println(new PerfectSquaresProblem().numSquares(108) + " " + 108);
        System.out.println(new PerfectSquaresProblem().numSquares(109) + " " + 109);
        System.out.println(new PerfectSquaresProblem().numSquares(110) + " " + 110);
        System.out.println(new PerfectSquaresProblem().numSquares(111) + " " + 111);
        System.out.println(new PerfectSquaresProblem().numSquares(112) + " " + 112);
        System.out.println(new PerfectSquaresProblem().numSquares(113) + " " + 113);
        System.out.println(new PerfectSquaresProblem().numSquares(114) + " " + 114);
        System.out.println(new PerfectSquaresProblem().numSquares(115) + " " + 115);
        System.out.println(new PerfectSquaresProblem().numSquares(116) + " " + 116);
        System.out.println(new PerfectSquaresProblem().numSquares(117) + " " + 117);
        System.out.println(new PerfectSquaresProblem().numSquares(118) + " " + 118);
        System.out.println(new PerfectSquaresProblem().numSquares(119) + " " + 119);
        System.out.println(new PerfectSquaresProblem().numSquares(120) + " " + 120);
        System.out.println(new PerfectSquaresProblem().numSquares(121) + " " + 121);
        System.out.println(new PerfectSquaresProblem().numSquares(122) + " " + 122);
        System.out.println(new PerfectSquaresProblem().numSquares(123) + " " + 123);
        System.out.println(new PerfectSquaresProblem().numSquares(124) + " " + 124);
        System.out.println(new PerfectSquaresProblem().numSquares(125) + " " + 125);
        System.out.println(new PerfectSquaresProblem().numSquares(126) + " " + 126);
        System.out.println(new PerfectSquaresProblem().numSquares(127) + " " + 127);
        System.out.println(new PerfectSquaresProblem().numSquares(128) + " " + 128);
        System.out.println(new PerfectSquaresProblem().numSquares(129) + " " + 129);
        System.out.println(new PerfectSquaresProblem().numSquares(130) + " " + 130);
    }

    /*
    Using Maths

    public int numSquares(int n) {

        while (n % 4 == 0) n /= 4;

        if (n % 8 == 7) return 4;

        if (isSquare(n)) return 1;

        for (int i = 1; i<= n; i++) {
            if (isSquare(n - i * i)) return 2;
        }

        return 3;
    }

    public boolean isSquare(int n) {
        int sq = (int) Math.sqrt(n);
        return n == sq * sq;
    }
    */

    // Using Memoization -> DP
    public int numSquares(int n) {

        int[] memo = new int[n + 1];
        return fetchSquaresRecursively(n, memo);
    }

    public int fetchSquaresRecursively(int n, int[] memo) {

        if (n == 0) return 0;
        int min = n;

        if (memo[n] > 0) return memo[n];

        for (int i = 1; i * i <= n; i++)
            min = Math.min(fetchSquaresRecursively(n - i * i, memo), min);

        memo[n] = min + 1;
        return min + 1;
    }
}
